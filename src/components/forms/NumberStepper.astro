<div class="stepper-container">
  <div class="stepper-select-wrapper">
    <select id="guest-select" name="acompanantes" required>
      <option value="" disabled selected>-- Selecciona el número de pases -- </option>
      {
        Array.from({ length: 10 }, (_, i) => (
          <option value={i + 1}>{i + 1}</option>
        ))
      }
    </select>
  </div>

  <div id="stepper-input-wrapper" class="stepper-input-wrapper is-hidden">
    <button type="button" class="stepper-btn" id="stepper-decrement">-</button>
    <input
      type="number"
      id="stepper-input"
      value="1"
      min="1"
      max="10"
      readonly
    />
    <button type="button" class="stepper-btn" id="stepper-increment">+</button>
  </div>
</div>

<style>
  .stepper-container {
    position: relative;
    width: 100%;
  }
  .is-hidden {
    display: none !important;
  }

  select,
  input,
  button {
    font-family: var(--family-body);
    color: var(--color-gray);
  }

  select {
    width: 100%;
    height: 50px;
    padding: 0 15px;
    border: 2px solid #ddd;
    border-radius: 10px;
    font-size: var(--font-5);
    appearance: none;
    background-color: var(--color-white);
    cursor: pointer;
  }

  .stepper-input-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    border: 2px solid #ddd;
    border-radius: 10px;
    overflow: hidden;
  }

  .stepper-btn {
    background-color: #f5f5f5;
    border: none;
    width: 50px;
    height: 50px;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--color-brown);
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .stepper-btn:hover {
    background-color: #e0e0e0;
  }

  input[type="number"] {
    width: 100%;
    height: 50px;
    border: none;
    text-align: center;
    font-size: 1.2rem;
    font-weight: bold;
    -moz-appearance: textfield; /* Firefox */
  }

  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none; /* Chrome, Safari */
  }

  @media (max-width: 500px) {
    select {
      font-size: var(--font-6);
    }
  }
</style>

<script>
  function setupStepper() {
    const selectWrapper = document.querySelector(".stepper-select-wrapper");
    const guestSelect = document.getElementById(
      "guest-select"
    ) as HTMLSelectElement;
    const stepperWrapper = document.getElementById("stepper-input-wrapper");
    const stepperInput = document.getElementById(
      "stepper-input"
    ) as HTMLInputElement;
    const decrementBtn = document.getElementById("stepper-decrement");
    const incrementBtn = document.getElementById("stepper-increment");

    if (
      !selectWrapper ||
      !guestSelect ||
      !stepperWrapper ||
      !stepperInput ||
      !decrementBtn ||
      !incrementBtn
    )
      return;

    // Cambiar de select a input
    guestSelect.addEventListener("change", () => {
      stepperInput.value = guestSelect.value;
      selectWrapper.classList.add("is-hidden");
      stepperWrapper.classList.remove("is-hidden");
    });

    // Lógica de los botones +/-
    decrementBtn.addEventListener("click", () => {
      let currentValue = parseInt(stepperInput.value, 10);
      if (currentValue > 1) {
        stepperInput.value = (currentValue - 1).toString();
      }
    });

    incrementBtn.addEventListener("click", () => {
      let currentValue = parseInt(stepperInput.value, 10);
      if (currentValue < 10) {
        stepperInput.value = (currentValue + 1).toString();
      }
    });
  }
  document.addEventListener("DOMContentLoaded", setupStepper);
</script>
